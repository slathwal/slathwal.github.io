<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Shefali Lathwal">
<meta name="dcterms.date" content="2025-03-27">

<title>Permutation test in statistics – Shefali Lathwal</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/profile.jpg" rel="icon" type="image/jpeg">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-cf6845bbda1dda8865d8d4e405b63468.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/quarto-contrib/fontawesome6-1.2.0/all.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-1.2.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Shefali Lathwal</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blogs.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://www.linkedin.com/in/shefali-lathwal-90bb4b44/" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-linkedin"></i></a>
    <a href="https://github.com/slathwal" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#get-the-data" id="toc-get-the-data" class="nav-link active" data-scroll-target="#get-the-data">Get the data</a></li>
  <li><a href="#explore-the-data" id="toc-explore-the-data" class="nav-link" data-scroll-target="#explore-the-data">Explore the data</a>
  <ul class="collapse">
  <li><a href="#look-at-the-number-of-people-born-in-each-century-after-the-year-1000" id="toc-look-at-the-number-of-people-born-in-each-century-after-the-year-1000" class="nav-link" data-scroll-target="#look-at-the-number-of-people-born-in-each-century-after-the-year-1000">Look at the number of people born in each century after the year 1000</a></li>
  <li><a href="#look-at-the-median-difference-between-genders-across-centuries" id="toc-look-at-the-median-difference-between-genders-across-centuries" class="nav-link" data-scroll-target="#look-at-the-median-difference-between-genders-across-centuries">Look at the median difference between genders across centuries</a></li>
  <li><a href="#look-at-the-total-individuals-in-the-data-split-by-gender-across-centuries" id="toc-look-at-the-total-individuals-in-the-data-split-by-gender-across-centuries" class="nav-link" data-scroll-target="#look-at-the-total-individuals-in-the-data-split-by-gender-across-centuries">Look at the total individuals in the data split by gender across centuries</a></li>
  </ul></li>
  <li><a href="#select-a-subset-of-the-data-for-individuals-born-in-the-13th-century" id="toc-select-a-subset-of-the-data-for-individuals-born-in-the-13th-century" class="nav-link" data-scroll-target="#select-a-subset-of-the-data-for-individuals-born-in-the-13th-century">Select a subset of the data for individuals born in the 13th century</a></li>
  <li><a href="#perform-permuation-testing-to-see-if-the-observed-difference-in-median-value-of-age-of-death-between-genders-is-statistically-significant-or-not." id="toc-perform-permuation-testing-to-see-if-the-observed-difference-in-median-value-of-age-of-death-between-genders-is-statistically-significant-or-not." class="nav-link" data-scroll-target="#perform-permuation-testing-to-see-if-the-observed-difference-in-median-value-of-age-of-death-between-genders-is-statistically-significant-or-not.">Perform permuation testing to see if the observed difference in median value of <code>Age of death</code> between genders is statistically significant or not.</a>
  <ul class="collapse">
  <li><a href="#calculate-the-difference-between-median-age-of-death-of-genders-in-the-data" id="toc-calculate-the-difference-between-median-age-of-death-of-genders-in-the-data" class="nav-link" data-scroll-target="#calculate-the-difference-between-median-age-of-death-of-genders-in-the-data">Calculate the difference between median <code>Age of death</code> of genders in the data</a></li>
  <li><a href="#shuffle-the-data-1000-times-and-create-a-distribution-of-difference-between-median-age-of-death-of-genders" id="toc-shuffle-the-data-1000-times-and-create-a-distribution-of-difference-between-median-age-of-death-of-genders" class="nav-link" data-scroll-target="#shuffle-the-data-1000-times-and-create-a-distribution-of-difference-between-median-age-of-death-of-genders">Shuffle the data 1000 times and create a distribution of difference between median <code>Age of death</code> of genders</a></li>
  <li><a href="#calculate-95-confidence-intervals-for-observing-the-effect-of-gender-of-difference-in-median-value-of-age-of-death." id="toc-calculate-95-confidence-intervals-for-observing-the-effect-of-gender-of-difference-in-median-value-of-age-of-death." class="nav-link" data-scroll-target="#calculate-95-confidence-intervals-for-observing-the-effect-of-gender-of-difference-in-median-value-of-age-of-death.">Calculate 95% confidence intervals for observing the effect of gender of difference in median value of <code>Age of death</code>.</a></li>
  <li><a href="#calculate-the-p-value-for-the-observed-difference-in-median-of-age-of-death-between-genders" id="toc-calculate-the-p-value-for-the-observed-difference-in-median-of-age-of-death-between-genders" class="nav-link" data-scroll-target="#calculate-the-p-value-for-the-observed-difference-in-median-of-age-of-death-between-genders">Calculate the p-value for the observed difference in median of <code>Age of death</code> between genders</a></li>
  <li><a href="#plot-the-observed-statistic-with-the-obtained-distribution-and-95-confidence-intervals" id="toc-plot-the-observed-statistic-with-the-obtained-distribution-and-95-confidence-intervals" class="nav-link" data-scroll-target="#plot-the-observed-statistic-with-the-obtained-distribution-and-95-confidence-intervals">Plot the observed statistic with the obtained distribution and 95% confidence intervals</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Permutation test in statistics</h1>
  <div class="quarto-categories">
    <div class="quarto-category">python</div>
    <div class="quarto-category">statistics</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Shefali Lathwal </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 27, 2025</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">March 27, 2025</p>
    </div>
  </div>
    
  </div>
  


</header>


<p>If you want to compare median value of two different groups in a training dataset, which statistical test will you use? If you do not know the answer, permutation test will come in handy.</p>
<p>Permutation is a technique in statistics that allows you to perform hypothesis testing using any measurement of interest. The steps are as follows:</p>
<ol type="1">
<li><p>Calculate the statistic of interest on the given training data.</p></li>
<li><p>Assume that there is no difference between two groups in your training data and shuffle the data.</p></li>
<li><p>Re-calculate the statistic of interest on the shuffled data.</p></li>
<li><p>Repeat steps 2 and 3 many times.</p></li>
<li><p>Calculate how often the statistic of interest in the distribution has a value more extreme than the value calculated on the original training data. This fraction gives the p-value of the statistic of interest and allows you to draw a conclusion whether the difference observed in the two groups is statistically significant or not.</p></li>
</ol>
<p>The permuation algorithm is generic and can be used for any measurement. The idea is to compare an effect observed in the training data with a distribution generated by assuming that there is no effect in the data and calculate a p-value to determine the statistical significance of the effect. The permutation test does not involve making any assumptions about the distribution, and can therefore be used for quantities such as median and mode, for which no standard statistical tests exist.</p>
<p>Let’s look at an example of how to perform permutation test.</p>
<section id="get-the-data" class="level1">
<h1>Get the data</h1>
<p>In this example, we are going to use an <strong>Age Dataset</strong><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. This dataset contains the details of work, life and death of historical individuals. The data is avialable publicly on github.</p>
<p>For the following analysis, I will use just one part of the dataset from the <a href="https://github.com/Moradnejad/AgeDataset">AgeDataset github repository</a>.</p>
<div id="8abbc6d8" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>sns.set_theme(style <span class="op">=</span> <span class="st">"white"</span>, palette <span class="op">=</span> <span class="st">"pastel"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Download the csv file from the github repository</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>age1 <span class="op">=</span> pd.read_csv(<span class="st">"https://raw.githubusercontent.com/Moradnejad/AgeDataset/refs/heads/main/AgeDataset-V1-Part1.csv"</span>, header <span class="op">=</span> <span class="dv">0</span>, delimiter <span class="op">=</span> <span class="st">","</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>age1.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Id</th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Short description</th>
<th data-quarto-table-cell-role="th">Gender</th>
<th data-quarto-table-cell-role="th">Country</th>
<th data-quarto-table-cell-role="th">Occupation</th>
<th data-quarto-table-cell-role="th">Birth year</th>
<th data-quarto-table-cell-role="th">Death year</th>
<th data-quarto-table-cell-role="th">Manner of death</th>
<th data-quarto-table-cell-role="th">Age of death</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Q23</td>
<td>George Washington</td>
<td>1st president of the United States (1732–1799)</td>
<td>Male</td>
<td>United States of America; Kingdom of Great Bri...</td>
<td>Politician</td>
<td>1732</td>
<td>1799.0</td>
<td>natural causes</td>
<td>67.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Q42</td>
<td>Douglas Adams</td>
<td>English writer and humorist</td>
<td>Male</td>
<td>United Kingdom</td>
<td>Artist</td>
<td>1952</td>
<td>2001.0</td>
<td>natural causes</td>
<td>49.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Q91</td>
<td>Abraham Lincoln</td>
<td>16th president of the United States (1809-1865)</td>
<td>Male</td>
<td>United States of America</td>
<td>Politician</td>
<td>1809</td>
<td>1865.0</td>
<td>homicide</td>
<td>56.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Q254</td>
<td>Wolfgang Amadeus Mozart</td>
<td>Austrian composer of the Classical period</td>
<td>Male</td>
<td>Archduchy of Austria; Archbishopric of Salzburg</td>
<td>Artist</td>
<td>1756</td>
<td>1791.0</td>
<td>NaN</td>
<td>35.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Q255</td>
<td>Ludwig van Beethoven</td>
<td>German classical and romantic composer</td>
<td>Male</td>
<td>Holy Roman Empire; Austrian Empire</td>
<td>Artist</td>
<td>1770</td>
<td>1827.0</td>
<td>NaN</td>
<td>57.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The data consist of 10 columns, including <code>Gender</code>, <code>Birth year</code>, and <code>Age of death</code>. We will use permutation to examine if there is a difference in the <code>Age of Death</code> of <code>Females</code> versus <code>males</code>.</p>
</section>
<section id="explore-the-data" class="level1">
<h1>Explore the data</h1>
<p>Let’s look at the values available in the <code>Gender</code> column.</p>
<div id="e6ad7d40" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>age1[<span class="st">"Gender"</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>Gender
Male                                              217216
Female                                             21054
Transgender Female                                    15
Eunuch; Male                                          12
Transgender Male                                       8
Intersex                                               4
Eunuch                                                 2
Transgender Person; Intersex; Transgender Male         1
Non-Binary                                             1
Intersex; Male                                         1
Transgender Female; Female                             1
Transgender Female; Male                               1
Female; Male                                           1
Name: count, dtype: int64</code></pre>
</div>
</div>
<p>The <code>Gender</code> columns contains many other values apart from <code>Male</code> and <code>Female</code>. We will discard those values going forward. We are also going to plot the data for distribution of <code>Age of death</code> for both genders.</p>
<div id="cell-fig-gender-distribution-all-data" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>age1 <span class="op">=</span> age1[age1[<span class="st">"Gender"</span>].isin([<span class="st">"Male"</span>, <span class="st">"Female"</span>])]</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> sns.displot(data <span class="op">=</span> age1, x <span class="op">=</span> <span class="st">"Age of death"</span>, col <span class="op">=</span> <span class="st">"Gender"</span>, binwidth <span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">#age1.hist(column = "Age of death", by = "Gender")</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>male_median_age <span class="op">=</span> age1[age1[<span class="st">"Gender"</span>] <span class="op">==</span> <span class="st">"Male"</span>][<span class="st">"Age of death"</span>].median()</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>female_median_age <span class="op">=</span> age1[age1[<span class="st">"Gender"</span>] <span class="op">==</span> <span class="st">"Female"</span>][<span class="st">"Age of death"</span>].median()</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>ax.facet_axis(<span class="dv">0</span>,<span class="dv">0</span>).axvline(x <span class="op">=</span> male_median_age, c <span class="op">=</span> <span class="st">"red"</span>, ls <span class="op">=</span> <span class="st">"--"</span>, label <span class="op">=</span> <span class="st">"Median Age"</span>)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>ax.facet_axis(<span class="dv">0</span>,<span class="dv">1</span>).axvline(x <span class="op">=</span> female_median_age, c <span class="op">=</span> <span class="st">"red"</span>, ls <span class="op">=</span> <span class="st">"--"</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Male median age is </span><span class="sc">{</span>male_median_age<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Female median age is </span><span class="sc">{</span>female_median_age<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Male median age is 71.0
Female median age is 73.0</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="fig-gender-distribution-all-data" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-gender-distribution-all-data-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-gender-distribution-all-data-output-2.png" width="945" height="464" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gender-distribution-all-data-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Distribution of Age of death for males and females in the whole dataset. The median Age of death is marked by the dashed red line.
</figcaption>
</figure>
</div>
</div>
</div>
<p>We see from <a href="#fig-gender-distribution-all-data" class="quarto-xref">Figure&nbsp;1</a> that in the full dataset, there is not much difference in the <code>Age of death</code> between the genders. We can also see that there are significantly less <code>Females</code> in the data than <code>Males</code>.</p>
<p>With the above observations, let’s look at the distribution of birth years in the data.</p>
<div id="cell-fig-birth-year-distribution" class="cell" data-fig-caption="Count of number of individuals in the data born in each year." data-execution_count="4">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>sns.histplot(age1[<span class="st">"Birth year"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="fig-birth-year-distribution" class="quarto-float quarto-figure quarto-figure-center anchored" width="605" height="435">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-birth-year-distribution-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-birth-year-distribution-output-1.png" id="fig-birth-year-distribution" width="605" height="435" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-birth-year-distribution-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2
</figcaption>
</figure>
</div>
</div>
</div>
<p><a href="#fig-birth-year-distribution" class="quarto-xref">Figure&nbsp;2</a> shows that a majority of the data are for people born after the year 1000. We can take a look at the <code>Age of death</code> of both genders across centuries and ask if there is any difference across centuries.</p>
<p>In order to do the above, we need to create a new column called <code>century</code>, which will include all people born in each century after the year 1000.</p>
<section id="look-at-the-number-of-people-born-in-each-century-after-the-year-1000" class="level2">
<h2 class="anchored" data-anchor-id="look-at-the-number-of-people-born-in-each-century-after-the-year-1000">Look at the number of people born in each century after the year 1000</h2>
<div id="5ad9c5b9" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new column called Century</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>centuries <span class="op">=</span> np.arange(<span class="dv">1000</span>, <span class="dv">2100</span>, <span class="dv">100</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> age1.copy()</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> century <span class="kw">in</span> centuries:</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> century <span class="op">&gt;=</span> <span class="dv">2000</span>:</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>        label <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span><span class="bu">int</span>(century<span class="op">/</span><span class="dv">100</span>) <span class="op">+</span> <span class="dv">1</span><span class="sc">}</span><span class="ss">st century"</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>        label <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span><span class="bu">int</span>(century<span class="op">/</span><span class="dv">100</span>) <span class="op">+</span> <span class="dv">1</span><span class="sc">}</span><span class="ss">th century"</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    df.loc[(df[<span class="st">"Birth year"</span>] <span class="op">&gt;=</span> century) <span class="op">&amp;</span> (df[<span class="st">"Birth year"</span>] <span class="op">&lt;</span> century<span class="op">+</span><span class="dv">100</span>), <span class="st">"century"</span>] <span class="op">=</span> label</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"century"</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>century
20th century    93651
19th century    90686
18th century    22699
17th century     9894
16th century     7491
15th century     4135
14th century     2129
13th century     1843
12th century     1488
11th century      983
21st century       37
Name: count, dtype: int64</code></pre>
</div>
</div>
<p>We can now look to see if there is a difference in <code>Age of death</code> between genders across different centuries.</p>
</section>
<section id="look-at-the-median-difference-between-genders-across-centuries" class="level2">
<h2 class="anchored" data-anchor-id="look-at-the-median-difference-between-genders-across-centuries">Look at the median difference between genders across centuries</h2>
<div id="211c28b5" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">"Gender"</span>, <span class="st">"century"</span>, <span class="st">"Age of death"</span>]].groupby([<span class="st">"century"</span>, <span class="st">"Gender"</span>])[<span class="st">"Age of death"</span>].median()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>century       Gender
11th century  Female    51.0
              Male      56.0
12th century  Female    50.5
              Male      56.0
13th century  Female    47.0
              Male      56.0
14th century  Female    46.0
              Male      57.0
15th century  Female    51.0
              Male      60.0
16th century  Female    55.0
              Male      60.0
17th century  Female    59.0
              Male      64.0
18th century  Female    64.0
              Male      69.0
19th century  Female    76.0
              Male      72.0
20th century  Female    78.0
              Male      76.0
21st century  Female    18.0
              Male      17.0
Name: Age of death, dtype: float64</code></pre>
</div>
</div>
<p>We can see that there are differences in median value of <code>Age of death</code> between the genders across centuries.</p>
</section>
<section id="look-at-the-total-individuals-in-the-data-split-by-gender-across-centuries" class="level2">
<h2 class="anchored" data-anchor-id="look-at-the-total-individuals-in-the-data-split-by-gender-across-centuries">Look at the total individuals in the data split by gender across centuries</h2>
<div id="55607f6a" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">"Gender"</span>, <span class="st">"century"</span>, <span class="st">"Age of death"</span>]].groupby([<span class="st">"century"</span>])[<span class="st">"Gender"</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>century       Gender
11th century  Male        864
              Female      119
12th century  Male       1300
              Female      188
13th century  Male       1566
              Female      277
14th century  Male       1828
              Female      301
15th century  Male       3743
              Female      392
16th century  Male       6912
              Female      579
17th century  Male       9186
              Female      708
18th century  Male      21406
              Female     1293
19th century  Male      84258
              Female     6428
20th century  Male      83259
              Female    10392
21st century  Male         28
              Female        9
Name: count, dtype: int64</code></pre>
</div>
</div>
<p>For the permutation test, we will pick a century and test if the median difference in <code>Age of Death</code> between genders is statistically significant or not. We can pick data from any century, but for the following analysis, we will focus on the 13th century.</p>
</section>
</section>
<section id="select-a-subset-of-the-data-for-individuals-born-in-the-13th-century" class="level1">
<h1>Select a subset of the data for individuals born in the 13th century</h1>
<div id="7b75ee02" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the dataframe for the thirteenth century</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>df_thirteen <span class="op">=</span> df[df[<span class="st">"century"</span>] <span class="op">==</span> <span class="st">"13th century"</span>][[<span class="st">"century"</span>, <span class="st">"Gender"</span>, <span class="st">"Age of death"</span>]].copy().reset_index(drop <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop the century column after checking that we have the right dataframe</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>df_thirteen.drop(columns<span class="op">=</span>[<span class="st">"century"</span>], inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>df_thirteen.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Gender</th>
<th data-quarto-table-cell-role="th">Age of death</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Male</td>
<td>56.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Male</td>
<td>56.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Male</td>
<td>48.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Female</td>
<td>36.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Male</td>
<td>33.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="perform-permuation-testing-to-see-if-the-observed-difference-in-median-value-of-age-of-death-between-genders-is-statistically-significant-or-not." class="level1">
<h1>Perform permuation testing to see if the observed difference in median value of <code>Age of death</code> between genders is statistically significant or not.</h1>
<p>Now that we have our dataset, we will: - calculate the observed difference in median value of <code>Age of death</code> between the genders. - shuffle the values of <code>Age of death</code> to create new datasets. Each new dataset will simulate that the gender labels could have been completely by chance and there is no effect of gender. - Create a distribution for difference in median of <code>Age of death</code> between genders for all iterations of the shuffled datasets. - Calculate how many times a value more extreme than the observed value of <code>Age of death</code> occurs in the distribution.</p>
<section id="calculate-the-difference-between-median-age-of-death-of-genders-in-the-data" class="level2">
<h2 class="anchored" data-anchor-id="calculate-the-difference-between-median-age-of-death-of-genders-in-the-data">Calculate the difference between median <code>Age of death</code> of genders in the data</h2>
<div id="e387d552" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a function to calculate the statistic of interest</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_median_diff_genders(df):</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    median_diff_genders <span class="op">=</span> (df[df[<span class="st">"Gender"</span>]<span class="op">==</span> <span class="st">"Male"</span>][<span class="st">"Age of death"</span>].median()) <span class="op">-</span> (df[df[<span class="st">"Gender"</span>]<span class="op">==</span> <span class="st">"Female"</span>][<span class="st">"Age of death"</span>].median())</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> median_diff_genders</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>observed_median_diff_genders <span class="op">=</span> calculate_median_diff_genders(df_thirteen)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>observed_median_diff_genders</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>np.float64(9.0)</code></pre>
</div>
</div>
</section>
<section id="shuffle-the-data-1000-times-and-create-a-distribution-of-difference-between-median-age-of-death-of-genders" class="level2">
<h2 class="anchored" data-anchor-id="shuffle-the-data-1000-times-and-create-a-distribution-of-difference-between-median-age-of-death-of-genders">Shuffle the data 1000 times and create a distribution of difference between median <code>Age of death</code> of genders</h2>
<div id="e94a5910" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>median_diff_genders_distribution <span class="op">=</span> np.zeros(n)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    shuffled_age <span class="op">=</span> df_thirteen[<span class="st">"Age of death"</span>].sample(df_thirteen.shape[<span class="dv">0</span>], replace <span class="op">=</span> <span class="va">False</span>).reset_index(drop <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    df_shuffled <span class="op">=</span> pd.DataFrame({<span class="st">"Gender"</span>: df_thirteen[<span class="st">"Gender"</span>], <span class="st">"Age of death"</span>: shuffled_age})</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    median_diff_genders_distribution[i] <span class="op">=</span> calculate_median_diff_genders(df_shuffled)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="calculate-95-confidence-intervals-for-observing-the-effect-of-gender-of-difference-in-median-value-of-age-of-death." class="level2">
<h2 class="anchored" data-anchor-id="calculate-95-confidence-intervals-for-observing-the-effect-of-gender-of-difference-in-median-value-of-age-of-death.">Calculate 95% confidence intervals for observing the effect of gender of difference in median value of <code>Age of death</code>.</h2>
<div id="c5dd4c99" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcualte 95% confidence interval</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>median_diff_genders_distribution.sort()</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>left_value <span class="op">=</span> median_diff_genders_distribution[<span class="bu">int</span>(<span class="fl">2.5</span><span class="op">/</span><span class="dv">100</span><span class="op">*</span>n)]</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>right_value <span class="op">=</span> median_diff_genders_distribution[<span class="bu">int</span>(<span class="fl">97.5</span><span class="op">/</span><span class="dv">100</span><span class="op">*</span>n)]</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>left_value, right_value</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>(np.float64(-3.0), np.float64(4.0))</code></pre>
</div>
</div>
</section>
<section id="calculate-the-p-value-for-the-observed-difference-in-median-of-age-of-death-between-genders" class="level2">
<h2 class="anchored" data-anchor-id="calculate-the-p-value-for-the-observed-difference-in-median-of-age-of-death-between-genders">Calculate the p-value for the observed difference in median of <code>Age of death</code> between genders</h2>
<div id="5c2e98dc" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>p_value <span class="op">=</span> np.<span class="bu">sum</span>((median_diff_genders_distribution <span class="op">&lt;</span> <span class="op">-</span><span class="bu">abs</span>(observed_median_diff_genders)) <span class="op">|</span> (median_diff_genders_distribution <span class="op">&gt;</span> <span class="bu">abs</span>(observed_median_diff_genders)))<span class="op">/</span>n<span class="op">*</span><span class="dv">100</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>p_value</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>np.float64(0.0)</code></pre>
</div>
</div>
</section>
<section id="plot-the-observed-statistic-with-the-obtained-distribution-and-95-confidence-intervals" class="level2">
<h2 class="anchored" data-anchor-id="plot-the-observed-statistic-with-the-obtained-distribution-and-95-confidence-intervals">Plot the observed statistic with the obtained distribution and 95% confidence intervals</h2>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>sns.histplot(median_diff_genders_distribution, discrete <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>plt.axvline(x <span class="op">=</span> left_value, c <span class="op">=</span> <span class="st">"red"</span>, ls <span class="op">=</span> <span class="st">"--"</span>, label <span class="op">=</span> <span class="st">"95</span><span class="sc">% c</span><span class="st">onfidence interval"</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>plt.axvline(x <span class="op">=</span> right_value, c <span class="op">=</span> <span class="st">"red"</span>, ls <span class="op">=</span> <span class="st">"--"</span>)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>plt. axvline(x <span class="op">=</span> observed_median_diff_genders, c <span class="op">=</span> <span class="st">"blue"</span>, lw <span class="op">=</span> <span class="dv">2</span>, label <span class="op">=</span> <span class="st">"observed value in the data"</span>)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>plt.legend(loc <span class="op">=</span> <span class="st">"upper left"</span>)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Median age of death (Male) - Median age of death (Female)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-permutation" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="13">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-permutation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div id="fig-permutation-1" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="13">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-permutation-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<pre id="fig-permutation-1" class="cell-output cell-output-display" data-execution_count="13"><code>Text(0.5, 0, 'Median age of death (Male) - Median age of death (Female)')</code></pre>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-permutation-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Comparison of observed statistic with distribution generated under null hypothesis. The left and right limits for 95% confidence interval are marked as dashed red lines. The actual value of the statistic (difference in median value of Age of death between males and females is marked by the solid black line.)
</figcaption>
</figure>
</div>
<div class="cell-output cell-output-display">
<div id="fig-permutation-2" class="quarto-float quarto-figure quarto-figure-center anchored" width="597" height="435">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-permutation-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-permutation-output-2.png" id="fig-permutation-2" data-ref-parent="fig-permutation" width="597" height="435" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-permutation-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b)
</figcaption>
</figure>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-permutation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3
</figcaption>
</figure>
</div>
</div>
</section>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>We can see from <a href="#fig-permutation" class="quarto-xref">Figure&nbsp;3</a> that under null hypothesis, i.e., assuming that there is no impact of gender on <code>Age of death</code> of an individual in the thirteenth century, we do not observe any value as extreme as the value obtained for the data we have. Therefore, we can reject the null hypothesis and conclude that there is a statistically significant effect of gender on the <code>Age of death</code> of an individual in the thirteenth century.</p>
<p>The permuation algorithm is generic and can be used for any measurement. The idea is to compare an effect observed in the training data with a distribution generated by assuming that there is no effect in the data and calculate a p-value to determine the statistical significance of the effect. The permutation test does not involve making any assumptions about the distribution, and can therefore be used for quantities such as median and mode, for which no standard statistical tests exist.</p>


</section>


<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p> Amoradnejad, Issa; Amoradnejad, Rahimberdi; et al.&nbsp;(2022). “Age dataset: A structured general-purpose dataset on life, work, and death of 1.22 million distinguished people”. Workshop Proceedings of the 16th International AAAI Conference on Web and Social Media (ICWSM). 3. ICWSM: 1–4. doi:10.36190/2022.82.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Made with <a href="https://quarto.org"><img src="https://quarto.org/quarto.png" class="img-fluid" width="70"></a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="mailto:slathwal@alum.mit.edu">
<p><i class="fa-solid fa-envelope" aria-label="envelope"></i> Contact me</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://github.com/slathwal/slathwal.github.io">
<p><i class="fa-brands fa-github" aria-label="github"></i> Source code</p>
</a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>